# ==============================================
# TERRA DOMINUS - Backend Environment Variables
# ==============================================
# Copier ce fichier vers .env et remplir les valeurs

# ==============================================
# DATABASE CONFIGURATION
# ==============================================
# Option 1: URL complète (recommandé)
DATABASE_URL=postgres://username:password@localhost:5432/terra_dominus_dev

# Option 2: Variables séparées (alternative)
# DB_USER=username
# DB_PASSWORD=password
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=terra_dominus_dev

# SSL Configuration
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=true

# Logging SQL queries (dev uniquement)
DB_LOGGING=true

# ==============================================
# JWT AUTHENTICATION
# ==============================================
# IMPORTANT: Générer une clé longue et aléatoire pour production
# Exemple: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your_very_long_and_secure_jwt_secret_key_here_change_this_in_production

# Token expiration
ACCESS_TOKEN_TTL=2h
REFRESH_TOKEN_TTL_MS=604800000

# ==============================================
# REDIS CONFIGURATION
# ==============================================
# URL Redis pour BullMQ (workers) et TokenService (blacklist)
REDIS_URL=redis://127.0.0.1:6379

# BullMQ Configuration
BULLMQ_ATTEMPTS=3
BULLMQ_BACKOFF_MS=5000

# ==============================================
# SERVER CONFIGURATION
# ==============================================
# Port HTTP du serveur Express
PORT=5000

# Trust proxy (1 si derrière reverse proxy)
TRUST_PROXY=1

# Node environment
NODE_ENV=development

# ==============================================
# CORS CONFIGURATION
# ==============================================
# Liste des origines autorisées (séparées par virgules)
# Exemple: http://localhost:3000,http://localhost:3001
CORS_ORIGINS=http://localhost:3000

# ==============================================
# RATE LIMITING
# ==============================================
# Fenêtre de temps pour rate limit global (ms)
RATE_LIMIT_WINDOW_MS=900000

# Nombre max de requêtes dans la fenêtre
RATE_LIMIT_MAX=100

# ==============================================
# LOGGING CONFIGURATION
# ==============================================
# Niveau de log: debug, info, warn, error
LOG_LEVEL=debug

# Activer l'écriture dans un fichier
LOG_ENABLE_FILE=true

# Template du nom de fichier (remplacer %DATE% par la date)
LOG_FILE_TEMPLATE=app-%DATE%.log

# Chemin d'export des logs (optionnel)
# LOG_EXPORT_PATH=/var/log/terra-dominus/app.log

# ==============================================
# SOCKET.IO CONFIGURATION
# ==============================================
# Namespaces autorisés (séparés par virgules)
SOCKET_NAMESPACES=/

# ==============================================
# WORKERS CONFIGURATION
# ==============================================
# Intervalle de tick de production (ms)
PRODUCTION_TICK_MS=60000

# ==============================================
# OPTIONAL: OBSERVABILITY
# ==============================================
# Prometheus metrics endpoint déjà exposé sur /metrics

# Sentry DSN (error tracking)
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# ==============================================
# DEVELOPMENT HELPERS
# ==============================================
# Afficher les requêtes SQL en console (dev uniquement)
DEBUG=false
